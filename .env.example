# Environment Variables Template
# File: .env.example
# Copy file này thành .env.development hoặc .env.production và điền các giá trị thực

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database URLs cho từng service
DATABASE_URL_USER_SERVICE=postgresql://username:password@host:port/user_service_db
DATABASE_URL_PAYMENT_SERVICE=postgresql://username:password@host:port/payment_service_db
DATABASE_URL_MATH_SOLVER_SERVICE=postgresql://username:password@host:port/math_solver_db
DATABASE_URL_CONTENT_SERVICE=postgresql://username:password@host:port/content_service_db
DATABASE_URL_ADMIN_SERVICE=postgresql://username:password@host:port/admin_service_db

# PostgreSQL Connection Settings
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=your_postgres_user
POSTGRES_PASSWORD=your_postgres_password
POSTGRES_DB=postgres

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis URLs cho từng service với database numbers riêng biệt
REDIS_URL_USER_SERVICE=redis://:password@host:port/0
REDIS_URL_PAYMENT_SERVICE=redis://:password@host:port/1
REDIS_URL_MATH_SOLVER_SERVICE=redis://:password@host:port/2
REDIS_URL_CONTENT_SERVICE=redis://:password@host:port/3
REDIS_URL_ADMIN_SERVICE=redis://:password@host:port/4

# Redis Connection Settings
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password

# =============================================================================
# JWT & SECURITY CONFIGURATION
# =============================================================================

# JWT Secret Keys (QUAN TRỌNG: Phải thay đổi trong production)
JWT_SECRET_KEY=your-super-secret-jwt-key-here
JWT_REFRESH_SECRET_KEY=your-super-secret-refresh-key-here
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing
BCRYPT_ROUNDS=12

# Session Configuration
SESSION_TIMEOUT_MINUTES=60
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_MINUTES=30

# =============================================================================
# MICROSERVICES URLS
# =============================================================================

# Internal service URLs (Docker network)
USER_SERVICE_URL=http://user-service:8000
PAYMENT_SERVICE_URL=http://payment-service:8000
MATH_SOLVER_SERVICE_URL=http://math-solver-service:8000
CONTENT_SERVICE_URL=http://content-service:8000
ADMIN_SERVICE_URL=http://admin-service:8000

# External service URLs (for frontend)
NEXT_PUBLIC_USER_SERVICE_URL=http://your-domain.com:8001
NEXT_PUBLIC_PAYMENT_SERVICE_URL=http://your-domain.com:8002
NEXT_PUBLIC_MATH_SOLVER_SERVICE_URL=http://your-domain.com:8003
NEXT_PUBLIC_CONTENT_SERVICE_URL=http://your-domain.com:8004
NEXT_PUBLIC_ADMIN_SERVICE_URL=http://your-domain.com:8005

# =============================================================================
# PAYMENT GATEWAY CONFIGURATION
# =============================================================================

# VNPay Configuration (Đăng ký tại: https://vnpay.vn)
VNPAY_TMN_CODE=your-vnpay-terminal-code
VNPAY_HASH_SECRET=your-vnpay-hash-secret
VNPAY_API_URL=https://vnpayment.vn/paymentv2/vpcpay.html
VNPAY_RETURN_URL=http://your-domain.com/payment/vnpay/return

# MoMo Configuration (Đăng ký tại: https://business.momo.vn)
MOMO_PARTNER_CODE=your-momo-partner-code
MOMO_ACCESS_KEY=your-momo-access-key
MOMO_SECRET_KEY=your-momo-secret-key
MOMO_API_URL=https://payment.momo.vn/v2/gateway/api/create
MOMO_RETURN_URL=http://your-domain.com/payment/momo/return
MOMO_NOTIFY_URL=http://your-domain.com/api/v1/payments/momo/notify

# ZaloPay Configuration (Đăng ký tại: https://zalopay.vn)
ZALOPAY_APP_ID=your-zalopay-app-id
ZALOPAY_KEY1=your-zalopay-key1
ZALOPAY_KEY2=your-zalopay-key2
ZALOPAY_API_URL=https://openapi.zalopay.vn/v2/create
ZALOPAY_CALLBACK_URL=http://your-domain.com/api/v1/payments/zalopay/callback

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Settings (Gmail, Outlook, SendGrid, etc.)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_USE_TLS=true
EMAIL_FROM_ADDRESS=noreply@your-domain.com
EMAIL_FROM_NAME=Your Website Name

# Email Templates
EMAIL_VERIFICATION_TEMPLATE=email_verification
PASSWORD_RESET_TEMPLATE=password_reset
PAYMENT_CONFIRMATION_TEMPLATE=payment_confirmation

# =============================================================================
# FILE UPLOAD & STORAGE
# =============================================================================

# File Upload Settings
MAX_FILE_UPLOAD_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_EXTENSIONS=jpg,jpeg,png,gif,pdf,doc,docx
UPLOAD_FOLDER=./uploads
STATIC_FOLDER=./static

# AWS S3 Configuration (Optional)
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_S3_BUCKET=your-s3-bucket-name
AWS_S3_REGION=ap-southeast-1

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Log Level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=./logs/app.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================

# Environment: development, staging, production
ENVIRONMENT=production
DEBUG=false
TESTING=false

# CORS Settings
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# Cache Settings
CACHE_TTL_SECONDS=3600  # 1 hour
CACHE_MAX_ENTRIES=10000

# =============================================================================
# API CONFIGURATION
# =============================================================================

# API Versioning
API_VERSION=v1
API_PREFIX=/api/v1

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# Request Timeout
REQUEST_TIMEOUT_SECONDS=30
DATABASE_TIMEOUT_SECONDS=10

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature Toggles
ENABLE_USER_REGISTRATION=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_PAYMENT_GATEWAY=true
ENABLE_MULTI_LANGUAGE=true
ENABLE_AUDIT_LOGGING=true
ENABLE_RATE_LIMITING=true
ENABLE_CACHING=true

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Website đang được bảo trì, vui lòng quay lại sau.

# =============================================================================
# THIRD PARTY SERVICES
# =============================================================================

# Google OAuth (Đăng ký tại: https://console.developers.google.com)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Facebook OAuth (Đăng ký tại: https://developers.facebook.com)
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret

# Analytics
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX
FACEBOOK_PIXEL_ID=your-facebook-pixel-id

# =============================================================================
# HƯỚNG DẪN SỬ DỤNG
# =============================================================================

# 1. Copy file này thành .env.development hoặc .env.production
# 2. Thay thế tất cả giá trị placeholder bằng giá trị thực
# 3. Đảm bảo file .env không được commit vào Git (đã có trong .gitignore)
# 4. Các biến có prefix NEXT_PUBLIC_ sẽ được expose ra frontend
# 5. Trong production, sử dụng strong passwords và secrets
# 6. Cấu hình CORS_ORIGINS phù hợp với domain thực tế
# 7. Thiết lập monitoring và logging phù hợp với môi trường
